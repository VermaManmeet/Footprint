function physActivatePlugin(){const e=document.querySelector(".phys-form-license");e&&e.addEventListener("submit",(function(t){t.preventDefault();document.querySelectorAll(".phys-license-notice").forEach((function(e){e.remove()}));const n=new FormData(e),s={};for(const[e,t]of n.entries())s[e]=t;const i=e.querySelector('[type="submit"]'),c=i.innerHTML;i.innerHTML="Activating...",i.setAttribute("disabled","disabled"),wp.apiFetch({path:"/phys/v1/license/activate",method:"POST",data:s}).then((t=>{"success"==t.status?(e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--success text-success"><p>License activated successfully.</p></div>'),setTimeout((function(){let e=new URLSearchParams(window.location.search).get("phys_redirect");e?window.location.href=e:window.location.reload()}),800)):e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).catch((t=>{e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).finally((()=>{i.removeAttribute("disabled"),i.innerHTML=c}))}))}function physDeactivatePlugin(){const e=document.querySelector(".phys-deactive");e&&e.addEventListener("click",(function(t){t.preventDefault();document.querySelectorAll(".phys-license-notice").forEach((function(e){e.remove()}));const n=e.innerHTML;e.innerHTML="Deactivating...",e.setAttribute("disabled","disabled"),wp.apiFetch({path:"/phys/v1/license/deactivate",method:"POST"}).then((t=>{"success"==t.status?(e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--success text-success"><p>License deactivated successfully.</p></div>'),setTimeout((function(){window.location.reload()}),800)):e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).catch((t=>{e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).finally((()=>{e.removeAttribute("disabled"),e.innerHTML=n}))}))}function physUpdatePersonal(){const e=document.querySelector(".phys-form-personal");document.querySelector(".arrow-personal-token");e&&e.addEventListener("submit",(function(t){t.preventDefault();document.querySelectorAll(".phys-license-notice").forEach((function(e){e.remove()}));const n=new FormData(e),s={};for(const[e,t]of n.entries())s[e]=t;const i=e.querySelector('[type="submit"]'),c=i.innerHTML;i.innerHTML="Activating...",i.setAttribute("disabled","disabled"),wp.apiFetch({path:"/phys/v1/license/update-personal",method:"POST",data:s}).then((t=>{"success"==t.status?(e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--success text-success"><p>License activated successfully.</p></div>'),setTimeout((function(){window.location.reload()}),800)):e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).catch((t=>{e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).finally((()=>{i.removeAttribute("disabled"),i.innerHTML=c}))}))}!function(e){e(document).ready((function(){!function(){if(0==e(".tc-importer-wrapper").length)return;e(document).on("change","#phys-select-page-builder",(function(){var t=e(this),n=t.val(),s=t.parents(".tc-importer-wrapper"),i={action:"phys_update_chosen_builder",phys_key:"phys_page_builder_chosen",phys_value:n};""!==n?(s.removeClass("visual_composer"),s.removeClass("site_origin"),s.removeClass("elementor"),s.addClass(n),s.removeClass("overlay").addClass("loading"),e.post(ajaxurl,i,(function(e){s.removeClass("loading")}))):s.addClass("overlay")}))}()})),e(document).on("click",".tc-button-deregister",(function(t){t.preventDefault(),window.confirm(e(this).data("confirm_deregister"))&&(window.location.href=e(this).data("url-deregister"))}))}(jQuery),document.addEventListener("DOMContentLoaded",(function(){physActivatePlugin(),physDeactivatePlugin(),physUpdatePersonal()}));